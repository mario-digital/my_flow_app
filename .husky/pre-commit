#!/usr/bin/env sh

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for file-level checks
bunx lint-staged || { echo "âŒ lint-staged failed"; exit 1; }

# Type check frontend (quick check)
echo "ğŸ“ Type checking frontend..."
(cd my_flow_client && bun run typecheck) || { echo "âŒ Frontend type check failed"; exit 1; }

# Type check backend (quick check)
echo "ğŸ Type checking backend..."
PYTHONPATH=./my_flow_api uv run --project my_flow_api mypy my_flow_api/src/ || { echo "âŒ Backend type check failed"; exit 1; }

echo "âœ… Pre-commit checks passed!"
