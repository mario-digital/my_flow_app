# Project Brief: My Flow

---

## Executive Summary

**My Flow** is an AI-powered context-switching companion that reimagines productivity by helping users transition intentionally between different versions of themselves throughout the dayâ€”Work-You, Personal-You, Rest-You, and Social-You. Instead of managing overwhelming task lists, My Flow focuses on being present in each context by showing only 3-5 relevant "flows" (tasks) per context, guided by conversational AI that learns patterns and facilitates meaningful transitions.

The product targets anyone juggling multiple rolesâ€”students, professionals, creativesâ€”who experience context-switching fatigue and want to show up more intentionally in each moment. By transforming the traditional TODO app into a flow companion with transition intelligence, My Flow delivers productivity for people tired of productivity apps.

**Target market:** Digital nomads (context-switchers), knowledge workers, students, and multi-role professionals seeking intentional living over task completion.

**Key value proposition:** Less overwhelm, more presenceâ€”through context-aware filtering, AI-guided transitions, and intentional scarcity that focuses attention on what truly matters right now.

---

## Problem Statement

### Current State

Modern life demands constant context switching, yet our minds and tools aren't designed for it. Throughout a single day, people shift between fundamentally different versions of themselvesâ€”the focused professional in a morning meeting, the caring family member at lunch, the creative problem-solver in the afternoon, the depleted human needing rest in the evening. Each transition carries cognitive load, emotional recalibration, and the mental overhead of re-prioritizing what matters.

### Pain Points

- **Overwhelming master lists:** Traditional productivity apps present everything at once, forcing users to mentally filter hundreds of items to find what's relevant *right now*
- **Context-switching fatigue:** Every role change requires re-scanning an entire task list, increasing decision fatigue and reducing presence
- **No transition support:** Apps treat context switches as invisible, missing the critical moments where intention-setting matters most
- **Doing more, not being better:** Productivity tools gamify completion rather than supporting intentional living across life's different domains

### Impact (Quantified)

- Research shows context switching can reduce productivity by up to 40% and increase mental fatigue
- Knowledge workers switch contexts every 3-10 minutes on average
- 80% of tasks in typical TODO apps become stale or irrelevant, creating guilt and anxiety
- Users report feeling "behind" rather than "in flow" when using traditional task managers

### Why Existing Solutions Fall Short

- **Traditional TODO apps** (Todoist, Things): Context-blind; rely on manual tagging/filtering; no transition intelligence
- **AI scheduling tools** (Motion, Reclaim): Focus on calendar optimization, not emotional/cognitive state management
- **Daily planners** (Sunsama): Better at intentional planning but still task-centric, not context-aware
- **None address the transition moment:** The critical psychological shift between contexts is completely ignored

### Urgency

Remote and hybrid work have intensified context switching (work-home boundaries blurred). Mental health awareness is rising, with users seeking tools that reduce overwhelm rather than add to it. AI capabilities now make conversational, context-aware assistance feasible at scale. The market is ready for productivity tools that prioritize wellbeing and intentionality.

---

## Proposed Solution

### Core Concept

My Flow is an AI-powered context-switching companion that helps users manage transitions between different versions of themselves throughout the day. Instead of presenting an overwhelming master task list, My Flow organizes life into 3-4 distinct "contexts" (Work Flow, Personal Flow, Rest Flow, Social Flow), each showing only 3-5 relevant items. The AI serves as the primary interfaceâ€”users have natural conversations about what's on their mind, and the AI translates intentions into actionable "flows" while facilitating reflection at transition moments.

### Key Differentiators

1. **Context-First, Not Task-First:** The app adapts to *who you are right now* rather than showing everything you need to do eventually
2. **Transition Intelligence:** AI actively facilitates context switches with reflection prompts ("How did Work Flow go? Ready for Personal Flow?")
3. **AI as Companion, Not Tool:** Conversational interface is the front door; the AI learns patterns, suggests context switches, and surfaces relevant information proactively
4. **Intentional Scarcity:** Limiting visible items (3-5 per context) reduces anxiety and increases focus on what truly matters
5. **Flow-Based Language:** Reframes "tasks" as "flows"â€”terminology that emphasizes momentum and state rather than obligation

### Why This Solution Succeeds Where Others Haven't

- **Addresses the ignored moment:** Other apps focus on task management; we focus on the psychological transition between contexts
- **Reduces rather than adds:** Traditional apps add features/complexity; we remove cognitive load through intelligent filtering
- **AI with purpose:** Not just "AI summarization" as a featureâ€”AI is the core interaction model that makes context awareness possible
- **Meets users where they are:** Natural language conversation vs. structured data entry
- **Balances structure and fluidity:** Predefined contexts provide scaffolding while AI conversation allows organic expression

### High-Level Product Vision

My Flow becomes the operating system for intentional livingâ€”a companion that recognizes when you're shifting modes, helps you leave one context cleanly, and enter the next with clarity. Over time, it learns your rhythms (you usually switch to Rest Flow around 7pm) and gently suggests better balance (you've been in Work Flow 80% of this week). The vision extends beyond task management to life managementâ€”helping people show up as their best selves in each moment rather than grinding through lists.

---

## Target Users

### Primary User Segment: Multi-Context Knowledge Workers

**Demographic/Firmographic Profile:**
- Age: 25-45 years old
- Occupation: Knowledge workers, professionals, graduate students
- Education: College-educated or higher
- Tech-savviness: Comfortable with digital tools and AI interfaces
- Work arrangement: Remote, hybrid, or flexible schedules that blur work-life boundaries
- Life stage: Often juggling career growth with personal responsibilities (family, health, relationships)

**Current Behaviors and Workflows:**
- Use multiple productivity tools (TODO apps, calendars, note-taking apps) but feel fragmented
- Constantly check different apps/systems to remember what needs attention
- Experience 5-10+ context switches per day (meetings â†’ deep work â†’ personal calls â†’ errands)
- Often work across multiple devices (laptop, phone, tablet)
- Manually re-scan entire task lists multiple times daily to filter what's relevant "right now"
- Feel guilty about incomplete tasks that have lost relevance
- Schedule "context buffer time" inconsistently or not at all

**Specific Needs and Pain Points:**
- **Cognitive overload:** Too many open loops across different life domains
- **Transition friction:** Difficulty "changing gears" between work mode and personal mode
- **Lack of presence:** Distracted by work thoughts during personal time (and vice versa)
- **Tool fatigue:** Tired of complex productivity systems that require heavy maintenance
- **Need for intentionality:** Want to show up deliberately in each context rather than reactively
- **Balance anxiety:** Worry about neglecting certain life areas (usually Rest/Personal when Work dominates)

**Goals They're Trying to Achieve:**
- Reduce mental clutter and decision fatigue
- Be fully present in each life context (not thinking about work during family time)
- Maintain better work-life balance without elaborate planning rituals
- Feel accomplished without feeling overwhelmed
- Transition between contexts smoothly and intentionally
- Have visibility into patterns (am I neglecting rest? overcommitting at work?)

---

### Secondary User Segment: Students with Multi-Role Lives

**Demographic/Firmographic Profile:**
- Age: 18-30 years old
- Status: Undergraduate or graduate students, often working part-time
- Education: Currently enrolled in higher education
- Tech-savviness: Digital natives, early adopters of new apps
- Life situation: Balancing coursework, jobs, social life, personal development

**Current Behaviors and Workflows:**
- Live in "burst mode" (intense study sessions, then social/recovery periods)
- Use mix of analog (planners) and digital tools (Google Calendar, basic TODO apps)
- Experience dramatic context switches (class â†’ work shift â†’ study group â†’ downtime)
- Struggle with time management across competing priorities
- Often procrastinate due to feeling overwhelmed by everything at once
- Use timers/Pomodoro techniques but inconsistently

**Specific Needs and Pain Points:**
- **Overwhelm from variety:** Balancing coursework, job responsibilities, social obligations, self-care
- **Energy management:** Need to respect energy levels (can't study effectively when depleted)
- **Deadline juggling:** Multiple syllabi, work schedules, personal commitments
- **FOMO and social pressure:** Difficulty saying no or protecting Rest Flow time
- **Need for structure without rigidity:** Want guidance but not micromanagement

**Goals They're Trying to Achieve:**
- Stay on top of academic requirements without burnout
- Maintain social connections and personal wellbeing
- Build healthy habits around work-rest balance
- Develop better self-awareness about productivity patterns
- Graduate with skills and sanity intact

---

## Goals & Success Metrics

### Business Objectives

- **Achieve product-market fit validation within 3 months:** 100+ active users with 40%+ weekly retention rate, indicating the context-switching paradigm resonates
- **Demonstrate differentiation from TODO apps:** 70%+ of beta users report "this feels different from other productivity tools" in qualitative feedback
- **Meet course requirements with distinction:** Deliver full-stack application (FastAPI + Next.js + MongoDB) that exceeds "basic TODO app" expectations and showcases modern UX/AI integration
- **Build foundation for future growth:** Create scalable architecture and data models that support Phase 2 features (real integrations, pattern learning)
- **Establish proof of concept for transition intelligence:** 60%+ of users actively engage with transition prompts (not skipping them)

### User Success Metrics

- **Reduced cognitive load:** Users report feeling "less overwhelmed" by their responsibilities (measured via weekly reflection surveys)
- **Increased intentionality:** Users complete 50%+ of transition reflections, indicating they find value in the pause-and-reflect moments
- **Context balance:** Users actively use 3+ contexts (not just defaulting to one), showing they embrace the multi-context mental model
- **Sustained engagement:** Users return 4+ days per week and have conversations with AI 2+ times per session
- **Flow completion satisfaction:** Users complete 40-60% of flows (not 90%+ which suggests over-planning, not 10% which suggests irrelevance)
- **Presence and focus:** Users self-report improved ability to "be present" in each context (qualitative measure)

### Key Performance Indicators (KPIs)

- **Daily Active Users (DAU):** Target 60% of weekly active users engage daily by end of Month 2
- **Context Switches Per Day:** Average 3-5 switches per active user (validates the multi-context usage pattern)
- **AI Conversation Engagement:** 80%+ of sessions include at least one AI interaction; average 3-4 messages per conversation
- **Transition Completion Rate:** 60%+ of context switches include engagement with transition prompts (entering/exiting reflections)
- **Flow Creation Source:** 70%+ of flows created via AI conversation (not manual entry), validating conversational interface as primary mode
- **Time in App Per Session:** 3-7 minutes average (enough to be useful, not so long it becomes a productivity drain itself)
- **Week-over-Week Retention:** 40%+ retention at Week 2, 25%+ at Week 4 (standard for productivity tools)
- **Net Promoter Score (NPS):** Target 30+ by end of beta period (indicates users would recommend to others)

---

## MVP Scope

### Core Features (Must Have)

- **User Authentication & Profiles:** Email/password signup and login via **Logto** (OAuth 2.1, OIDC) with secure session management. Basic user profile with name, email, and preference storage (default context, show/hide completed flows). Eliminates need for custom password hashing implementation.

- **Predefined Contexts (3-4):** Work Flow, Personal Flow, Rest Flow, and optionally Social Flow. Users can manually switch between contexts via clean UI. Each context has its own icon, display name, and isolated flow view.

- **AI Conversational Interface:** Chat-based primary interaction where users express intentions in natural language. AI extracts actionable items, creates flows, asks clarifying questions (due dates, priority), and maintains conversation history for learning. Powered by OpenAI or Anthropic Claude API with prompt engineering for context-aware responses.

- **Flow Management (Tasks Backend):** Full CRUD operations for flows (create, read, update, delete, mark complete/incomplete). Flows are tagged to specific contexts and include optional due dates, priority (AI-assigned), and creation source (AI vs. user). Database stores flows, linked to conversations that created them.

- **Context-Specific Views:** Each context displays only 3-5 most relevant flows (intentional scarcity). User preference to show "incomplete only" or "all flows" with recently completed visible for sense of progress. Clean, uncluttered UI that emphasizes current context.

- **Transition Facilitation (The Magic):** When entering a context, AI provides contextual greeting and suggests relevant actions ("I see you have a meeting in 2 hours, want to prep?"). When exiting, AI prompts brief reflection ("How did Work Flow go?"). AI recognizes cross-context items and suggests appropriate context placement.

- **Mock Context Data Panel:** Generated at signup and stored in MongoDB: fake calendar events (meetings with times/participants), fake emails (sender/subject/actionable flags), and fake pending items (appointments needing scheduling). Displayed when entering contexts to simulate future real integrations.

- **Conversation History & Memory:** Full conversation logs stored in MongoDB. AI references past interactions to build understanding of user patterns and preferences. Session-based UI (focused on present) with historical context powering AI intelligence.

---

### Out of Scope for MVP

- Automatic context detection based on time/location/calendar
- Real integrations (Google Calendar, Gmail, Slack, etc.)
- Custom context creation by users
- Advanced AI pattern learning and predictive suggestions
- Notifications, reminders, or push alerts
- Mobile native apps (iOS/Android)
- Calendar view or timeline visualization
- Collaboration features (shared contexts, team flows)
- Data export/import functionality
- Habit tracking or detailed analytics dashboards
- Voice interface or multimodal AI
- Recurring flows or template creation
- Sub-flows or hierarchical task structures
- File attachments or rich media in flows
- Third-party app integrations or API access

---

### MVP Success Criteria

**The MVP is successful if:**

1. **Technical Requirements Met:** Fully functional full-stack app with FastAPI backend, Next.js frontend, MongoDB persistence, Logto authentication, and AI integration that demonstrates modern engineering practices.

2. **Course Requirements Exceeded:** Clearly satisfies "TODO app with tasks and labels" assignment while showcasing system design thinking, UX innovation, and going beyond "rookie TODO app" stereotype.

3. **User Experience Validation:** 5-10 beta testers report that the experience "feels different" from traditional TODO apps and helps them feel more intentional about context switching (qualitative validation).

4. **Core Loop Works:** Users can sign up â†’ have AI conversation â†’ create flows across multiple contexts â†’ switch contexts with transition prompts â†’ mark flows complete â†’ reflect on their day. The entire journey is smooth and intuitive.

5. **AI Intelligence Demonstrated:** The AI successfully extracts flows from natural language, provides contextually relevant prompts, and makes the transition moments feel valuable (not annoying).

6. **Technical Foundation Solid:** Codebase is clean, scalable, and ready for Phase 2 enhancements. Data models support future features without major refactoring.

---

## Post-MVP Vision

### Phase 2 Features (Next 3-6 Months)

**Real Integrations via MCP or APIs:**
- Google Calendar integration for authentic meeting data and scheduling
- Gmail integration for actual email context and actionable items
- Slack/Teams integration for communication context awareness
- Ability to create calendar events and send emails directly from My Flow

**Enhanced Pattern Learning:**
- AI recognizes when users typically switch contexts (e.g., "You usually shift to Rest Flow around 7pm")
- Suggests context switches proactively based on learned patterns
- Identifies neglected contexts ("You haven't entered Rest Flow in 3 daysâ€”want to prioritize that?")
- Provides weekly/monthly reflection summaries showing context balance trends

**Smart Notifications & Reminders:**
- Context-aware push notifications (respects boundariesâ€”no Work Flow alerts during Rest Flow)
- Gentle transition reminders at learned switch times
- Pre-meeting prep reminders based on calendar integration
- Due date alerts surfaced only within relevant contexts

**Custom Context Creation:**
- Users can define their own contexts beyond the 4 defaults (e.g., "Creative Flow," "Side Project Flow")
- Custom icons, colors, and display names
- Flexible context definitions that match individual lifestyles

---

### Long-Term Vision (1-2 Years)

**Life Operating System:**
My Flow evolves from a task companion to a comprehensive life management platform. It becomes the single interface where users manage not just tasks, but their entire intentional living practiceâ€”understanding their rhythms, recognizing burnout early, and gently guiding better balance across all life domains.

**Wellness & Burnout Prevention:**
- Mood tracking integrated with context transitions
- Energy level monitoring correlated with productivity patterns
- Early warning signs for burnout (e.g., "You've been 90% Work Flow for 2 weeks straight")
- Integration with health apps (sleep, exercise) to understand whole-person patterns
- Personalized recommendations for rest and recovery

**Voice & Multimodal Interface:**
- Voice-based AI conversation for hands-free use during transitions
- Image recognition for capturing physical notes or whiteboards
- Ambient computing integration (smart speakers, wearables)

**Advanced AI Capabilities:**
- Deeper natural language understanding for complex intention extraction
- Predictive flow creation based on calendar and email content
- Automated context switching suggestions with high accuracy
- Personalized productivity insights unique to each user's patterns

---

### Expansion Opportunities

**Social & Collaboration Features:**
- Shared contexts for families (e.g., "Family Flow" with shared household tasks)
- Team contexts for work groups with collaborative flows
- Context-aware communication (know when teammates are in focus mode vs. available)

**Enterprise Edition:**
- Organization-level analytics on context switching and burnout patterns
- Team wellness dashboards for managers
- Integration with corporate tools (JIRA, Asana, Microsoft 365)
- Custom branding and white-label options

**Mobile Native Apps:**
- iOS and Android apps with offline capability
- Widget support for quick context switching and flow viewing
- Siri/Google Assistant integration for voice commands

**Developer Ecosystem:**
- Public API for third-party integrations
- Plugin architecture for community-built context types
- Data export and portability for user control

**Premium Tiers:**
- Free tier: Basic contexts, AI conversation, 50 flows
- Pro tier: Unlimited flows, all integrations, advanced analytics
- Team tier: Shared contexts, collaboration features, admin controls

---

## Technical Considerations

### Platform Requirements

- **Target Platforms:** Web application (desktop and mobile web browsers)
- **Browser/OS Support:**
  - Modern browsers: Chrome 120+, Firefox 120+, Safari 17+, Edge 120+
  - Responsive design for mobile browsers (iOS Safari, Chrome Android)
  - Progressive Web App (PWA) capabilities for mobile "install to home screen" experience
- **Performance Requirements:**
  - AI response time: <3 seconds for typical conversation turn
  - Page load time: <2 seconds for initial app load
  - Context switching: <500ms transition animation
  - Real-time updates: WebSocket connection for live AI streaming responses

---

### Technology Preferences

**CRITICAL: This project uses cutting-edge, latest-version technologies to demonstrate modern full-stack engineering.**

**Frontend (`my_flow_client`):**
- **Next.js 15.x** (latest React framework with App Router and React 19 support)
- **React 19.x** (latest with improved concurrent features)
- **TypeScript 5.x** (latest) for type safety
- **Tailwind CSS 4.x** (latest) for styling with custom design system
- **TanStack Query v5** (latest, formerly React Query) for data fetching and caching
- **Logto Next.js SDK** for authentication integration
- **WebSocket client** for real-time AI chat streaming
- **Bun** as package manager and runtime (replaces npm/pnpm/yarn)

**Backend (`my_flow_api`):**
- **FastAPI 0.115.x+** (latest Python async framework)
- **Python 3.12+** (latest stable)
- **Pydantic v2.x** (latest) for data validation and serialization
- **Motor 3.x** (latest async MongoDB driver)
- **Logto Python SDK** for token verification and protected endpoints
- **OpenAI API** (latest GPT-4 Turbo/GPT-4o) or **Anthropic Claude API** (Claude 3.5 Sonnet)
- **Poetry** or **uv** for Python dependency management (modern alternatives to pip)

**Database:**
- **MongoDB 7.x+** (latest) for flexible schema and rapid iteration
- Collections: Users, Contexts, Flows, Conversations, Labels
- Indexes on userId, context, status, dueDate for query performance

**Package Management & Runtime:**
- **Bun 1.x** (latest) for frontend - ultra-fast package manager, bundler, and JavaScript runtime
- All `npm`/`pnpm`/`yarn` commands replaced with `bun` equivalents
- Faster install times, faster test execution, faster dev server startup

**Hosting/Infrastructure:**
- Frontend: **Vercel** (optimal Next.js 15 deployment with zero-config)
- Backend: **Railway**, **Render**, or **Fly.io** (Python-friendly platforms)
- Database: **MongoDB Atlas** (managed service, latest version)
- Environment variables for secrets management
- CI/CD via **GitHub Actions** with Bun caching

---

### Authentication & Authorization

**Authentication Provider: Logto (https://logto.io)**

**Why Logto:**
- Modern, developer-first auth infrastructure (OAuth 2.1, OIDC)
- Native SDKs for both Next.js 15 and FastAPI (Python)
- Free tier: 50K monthly active users (more than sufficient for MVP/course project)
- SOC 2 Type II certified, privacy-compliant
- Supports social sign-in (Google, GitHub, etc.) and traditional email/password
- Built-in RBAC (role-based access control) for future expansion
- Multi-factor authentication ready

**Implementation Approach:**
- Logto handles all auth UI (sign-up, login, password reset) via hosted pages
- Frontend uses Logto Next.js SDK for session management and protected routes
- Backend validates Logto JWT tokens on protected API endpoints
- User profile data stored in both Logto (auth) and MongoDB (app-specific data)
- Seamless integration with existing Next.js 15 App Router patterns

**Security Benefits:**
- No need to implement custom password hashing (Argon2id) - handled by Logto
- Token rotation and secure session management out of the box
- Automatic security updates and patches from Logto team
- Reduces attack surface by delegating auth to specialized service

---

### Architecture Considerations

**Repository Structure:**
- Root-level project with two main directories:
  - `/my_flow_api` - FastAPI backend
  - `/my_flow_client` - Next.js 15 frontend
- Shared TypeScript types between frontend and backend (generated from Pydantic v2)
- Separate `bun.lockb` (frontend) and `poetry.lock` or `uv.lock` (backend) for dependency management
- Root-level documentation, configuration files, and Docker compose for local development

**Service Architecture:**
- RESTful API design with clear endpoint structure (`/auth`, `/contexts`, `/flows`, `/chat`)
- AI Service abstraction layer (allows swapping OpenAI GPT-4 â†” Claude 3.5 without changing core logic)
- Repository pattern for data access (clean separation between business logic and database)
- Middleware for authentication, logging, error handling, CORS
- WebSocket endpoint for streaming AI responses

**Integration Requirements:**
- **AI API:** OpenAI GPT-4 Turbo/GPT-4o or Anthropic Claude 3.5 Sonnet for conversation
- Function calling / tool use for structured flow creation from natural language
- Conversation memory management (store full history, send recent context to AI)
- WebSocket support for streaming AI responses (better UX than polling)
- Server-Sent Events (SSE) as fallback for streaming if WebSocket unavailable

**Security/Compliance:**
- **Authentication via Logto** (OAuth 2.1, OIDC standards)
- JWT token verification on backend protected routes
- HTTPS everywhere in production
- Input sanitization and validation at API layer (Pydantic v2 validators)
- Rate limiting on AI endpoints to prevent abuse (slowapi or similar)
- CORS configuration for frontend-backend communication
- No storage of passwords (delegated to Logto)
- Minimal sensitive user data storage (GDPR-friendly)
- Environment-based secrets management (Logto credentials, API keys never committed)

---

### Development Workflow

**Frontend Development:**
- `cd my_flow_client`
- `bun install` - Install dependencies
- `bun dev` - Start Next.js 15 dev server (Turbopack enabled)
- `bun build` - Production build
- `bun lint` - ESLint with Next.js 15 rules

**Backend Development:**
- `cd my_flow_api`
- `poetry install` or `uv sync` - Install Python dependencies
- `uvicorn main:app --reload` - Start FastAPI dev server with hot reload
- `pytest` - Run tests

**Full-Stack Local Development:**
- `docker-compose up` - Start MongoDB, backend, and frontend together
- Frontend on `localhost:3000`, Backend on `localhost:8000`

---

## Constraints & Assumptions

### Constraints

**Budget:**
- $0-50 total for MVP development and testing
- AI API costs (OpenAI/Claude): Estimated $20-30 for development + demo testing
- Hosting: Free tiers (Vercel, Railway/Render, MongoDB Atlas, Logto)
- Domain/SSL: Optional for course project, ~$15/year if desired

**Timeline:**
- Total project duration: 8-12 weeks (typical academic semester project)
- MVP development: 6-8 weeks
- Testing and refinement: 1-2 weeks
- Documentation and demo prep: 1 week
- Hard deadline: Course submission date (non-negotiable)

**Resources:**
- Solo developer or small team (1-3 people)
- Part-time development (10-20 hours/week alongside coursework)
- Limited design resources (using Tailwind components, minimal custom design)
- No dedicated QA team (self-testing and peer review only)
- Academic support limited to course instructor office hours

**Technical:**
- Must satisfy course requirements: full-stack app, authentication, database, REST API
- AI API rate limits: OpenAI/Claude free/trial tiers have request-per-minute caps
- Logto free tier: 50K MAU limit (not a constraint for MVP but noted)
- MongoDB Atlas free tier: 512MB storage limit (sufficient for MVP but limits data retention)
- Browser compatibility: Modern browsers only (no IE11, no legacy support)
- No mobile native apps (web-only reduces platform constraints)

---

### Key Assumptions

**User Behavior:**
- Users will adopt the "contexts" mental model with minimal onboarding
- Users are willing to have AI-driven conversations instead of direct task entry
- 3-5 flows per context is sufficient (not too limiting)
- Users will engage with transition prompts (not skip them as annoying)
- Target users have stable internet for real-time AI chat

**Technical:**
- Latest tech stack (Next.js 15, React 19, Bun) is stable enough for production use
- AI APIs (OpenAI/Claude) will remain accessible and affordable during development
- Logto service uptime and reliability meets expectations (99%+ availability)
- Mock data will be realistic enough to demonstrate value proposition
- WebSocket connections work reliably across target browsers
- Deployment platforms (Vercel, Railway) support latest framework versions

**Course/Academic:**
- Course allows use of third-party services (Logto, AI APIs, MongoDB Atlas)
- "TODO app with tasks and labels" requirement is satisfied by flows + contexts
- Innovative approach will be valued over traditional implementation
- Demo/presentation can effectively communicate the context-switching paradigm
- Grading prioritizes working software + innovation over exhaustive features

**Market/Product:**
- Context-switching fatigue is a real problem users recognize
- "Intentional living" messaging resonates with target demographic
- Beta testers (friends, classmates) will provide honest feedback
- The app concept is novel enough to stand out from typical student projects
- Mock integrations (calendar, email) are acceptable for MVP validation

**Development:**
- Team has or can quickly learn Next.js 15, FastAPI, MongoDB, and Bun
- AI prompt engineering will be effective enough without extensive tuning
- Development environment setup won't consume excessive time
- Git/GitHub workflow is established and understood
- Basic DevOps skills exist or can be acquired (deployment, env vars, CI/CD)

---

## Risks & Open Questions

### Key Risks

- **User Adoption Risk:** Users may not immediately understand the "contexts" paradigm and default to treating it as a traditional TODO app with categories. **Impact: High. Mitigation: Strong onboarding experience, clear value proposition messaging, and guided first-time-user flow.**

- **AI Conversation Quality:** The AI may fail to correctly extract flows from natural language, leading to frustration. Users might get nonsensical suggestions or miss critical information. **Impact: High. Mitigation: Extensive prompt engineering, few-shot examples in system prompts, fallback to manual flow creation, continuous testing with diverse inputs.**

- **Mock Data Feels Too Fake:** Generated calendar/email data might be obviously artificial, undermining the demo of transition intelligence. **Impact: Medium. Mitigation: Invest time in realistic data generation with varied scenarios, use personas for consistency, show authentic-looking timestamps and names.**

- **Latest Tech Stack Instability:** Next.js 15, React 19, and Bun are cutting-edge; unexpected bugs could block progress. **Impact: Medium. Mitigation: Monitor GitHub issues, have rollback plan to stable versions (Next.js 14, React 18), allocate time for troubleshooting, leverage active community support.**

- **AI API Costs Exceed Budget:** Unmonitored AI usage during development/testing could quickly consume free credits or incur unexpected charges. **Impact: Low-Medium. Mitigation: Set up usage alerts, implement request caching, use shorter conversation context windows, test with smaller models initially.**

- **Scope Creep:** Temptation to add "just one more feature" delays MVP completion. **Impact: Medium. Mitigation: Strict adherence to MVP scope, park ideas in "Phase 2" backlog, regular progress check-ins against timeline.**

- **Transition Prompt Fatigue:** Users may find AI prompts at every context switch annoying rather than helpful. **Impact: Medium. Mitigation: Make prompts brief (1-2 sentences), allow "skip" option, learn when to be quiet vs. proactive, A/B test prompt frequency.**

- **Logto Service Dependency:** If Logto experiences downtime or changes pricing/terms, authentication could be blocked. **Impact: Low. Mitigation: Logto is SOC 2 certified with high uptime; worst case, pivot to custom JWT auth (2-3 day delay).**

- **Course Requirements Misalignment:** Instructor may not accept context-switching approach as satisfying "TODO app with tasks and labels" requirement. **Impact: High. Mitigation: Clarify with instructor early, emphasize that flows = tasks and contexts = labels under the hood, prepare technical documentation showing database schema alignment.**

---

### Open Questions

- **Which AI provider: OpenAI or Claude?** GPT-4 has better function calling support; Claude 3.5 Sonnet has better instruction following and context understanding. Need to benchmark both for flow extraction accuracy and conversation quality.

- **How many flows should be created during onboarding?** Too few = sparse experience; too many = overwhelming. Need to test 2-3 flows per context vs. 4-5 vs. letting users create their own organically.

- **Should completed flows auto-hide or stay visible for X hours?** User preference or smart default? Testing needed to understand what gives best "sense of progress" without clutter.

- **What's the right conversation memory window?** Full history = better personalization but higher AI costs and slower responses. Last 10 messages? Last 24 hours? Need performance testing.

- **How do we handle cross-context items?** If user mentions "call dentist" during Work Flow, should AI immediately create it in Personal Flow, ask first, or just note it for later?

- **What triggers a transition prompt?** Manual context switch only, or also time-based (e.g., 2+ hours in one context)? Need to balance helpfulness vs. intrusiveness.

- **How realistic should mock data be?** Generic placeholders vs. persona-driven scenarios? More realism = better demo but more upfront work.

- **Should we support dark mode from day one?** Nice-to-have for demo polish but adds development time. Worth it or defer to Phase 2?

- **What's the fallback if AI fails?** Should users have a manual "Create Flow" button always visible, or hidden unless AI struggles? Need UX testing.

---

### Areas Needing Further Research

- **AI Prompt Engineering Best Practices:** Study OpenAI/Claude documentation on function calling, structured outputs, and conversation memory management. Research conversational AI UX patterns from products like Notion AI, ChatGPT, Claude.

- **Context-Switching Psychology:** Review research on cognitive load, context switching costs, and transition design. Understand what makes transitions feel smooth vs. jarring.

- **Productivity App User Behavior:** Analyze retention and engagement patterns from Todoist, Sunsama, Motion. What causes users to abandon productivity tools? How do successful apps maintain long-term engagement?

- **WebSocket vs. SSE for AI Streaming:** Compare implementation complexity, browser support, and performance. Determine if WebSocket is worth the added infrastructure or if SSE is sufficient.

- **Bun Production Readiness:** Research real-world production deployments using Bun. Identify known issues, deployment platform support, and community consensus on stability.

- **Logto Integration Patterns:** Review Logto documentation for Next.js 15 App Router and FastAPI. Identify any gotchas or best practices for token validation and session management.

- **MongoDB Schema Design for Conversations:** How to efficiently store and query conversation history? Embedded documents vs. separate collection? Indexing strategies for fast retrieval.

- **AI Cost Optimization:** Research techniques for reducing API costs: prompt compression, caching strategies, using cheaper models for simple tasks, user-side rate limiting.

---

## Next Steps

### Immediate Actions

1. **Validate Course Requirements with Instructor** - Schedule office hours to confirm that "flows + contexts" satisfies "tasks + labels" requirement. Show database schema alignment. Get explicit approval or guidance. **(Priority: Critical, Timeline: Week 1, Owner: You)**

2. **Choose AI Provider (OpenAI vs. Claude)** - Set up trial accounts for both. Create test prompts for flow extraction from natural language. Benchmark response quality, latency, and cost. Make final decision. **(Priority: High, Timeline: Week 1, Owner: You)**

3. **Set Up Development Environment** - Initialize `/my_flow_api` (FastAPI + Poetry/uv) and `/my_flow_client` (Next.js 15 + Bun) repositories. Configure MongoDB Atlas free tier. Set up Logto account and test app. Verify all services work locally. **(Priority: High, Timeline: Week 1, Owner: You)**

4. **Create Technical Architecture Document** - Detail API endpoints, data models (MongoDB schemas), authentication flow (Logto integration), and AI conversation architecture. Serves as development blueprint. **(Priority: High, Timeline: Week 1-2, Owner: You)**

5. **Design Low-Fidelity Wireframes** - Sketch main screens: login, context switcher, context view with flows, AI chat interface, transition prompts. Focus on user flow, not visual polish. **(Priority: Medium, Timeline: Week 1-2, Owner: You)**

6. **Implement Mock Data Generator** - Write Python script to generate realistic fake calendar events, emails, and pending items. Create 3-4 personas with consistent data patterns. Store templates in MongoDB on user signup. **(Priority: Medium, Timeline: Week 2, Owner: You)**

7. **Build Authentication Flow with Logto** - Integrate Logto SDKs in both frontend (Next.js) and backend (FastAPI). Implement protected routes, token verification, user profile sync. Test sign-up, login, logout flows. **(Priority: High, Timeline: Week 2-3, Owner: You)**

8. **Develop Core Backend API** - Build REST endpoints for contexts, flows, and conversations. Implement CRUD operations with MongoDB. Set up Pydantic models and validation. Write basic API tests. **(Priority: Critical, Timeline: Week 3-4, Owner: You)**

9. **Build AI Conversation Service** - Create AI abstraction layer with prompt templates for flow extraction, transition facilitation, and contextual suggestions. Implement conversation memory management. Test with diverse user inputs. **(Priority: Critical, Timeline: Week 3-5, Owner: You)**

10. **Develop Frontend Core UI** - Build context switcher, context view with flow list (3-5 items), and AI chat interface. Implement real-time WebSocket connection for AI streaming. Connect to backend APIs with TanStack Query. **(Priority: Critical, Timeline: Week 4-6, Owner: You)**

11. **Implement Transition Moments** - Code AI prompts for entering/exiting contexts. Design UI for transition screens. Test various prompt styles for helpfulness vs. intrusiveness. **(Priority: High, Timeline: Week 5-6, Owner: You)**

12. **User Testing Round 1 (Alpha)** - Recruit 3-5 beta testers (friends, classmates). Observe first-time usage. Collect feedback on context paradigm understanding, AI conversation quality, and transition prompts. **(Priority: High, Timeline: Week 6-7, Owner: You)**

13. **Iterate Based on Feedback** - Address critical usability issues. Refine AI prompts. Adjust transition prompt frequency. Improve onboarding flow if users don't "get it" initially. **(Priority: High, Timeline: Week 7-8, Owner: You)**

14. **Polish UI/UX** - Apply Tailwind styling, ensure responsive design, add loading states and error handling. Make AI chat feel smooth and natural. Add subtle animations for context switching. **(Priority: Medium, Timeline: Week 8, Owner: You)**

15. **Deploy to Production** - Deploy backend to Railway/Render, frontend to Vercel, configure production MongoDB Atlas. Set up environment variables and secrets. Test end-to-end in production. **(Priority: High, Timeline: Week 9, Owner: You)**

16. **Create Demo Video & Documentation** - Record 3-5 minute demo showing key features and differentiators. Write README with setup instructions. Prepare presentation slides for course submission. **(Priority: High, Timeline: Week 9-10, Owner: You)**

17. **Final Testing & Bug Fixes** - Conduct thorough testing across browsers. Fix remaining bugs. Optimize performance. Ensure demo scenarios work flawlessly. **(Priority: High, Timeline: Week 10, Owner: You)**

18. **Submit Project** - Submit all deliverables per course requirements. Present demo to class if required. **(Priority: Critical, Timeline: Week 11-12, Owner: You)**

---

### PM Handoff

This **Project Brief** provides the full context for **My Flow**â€”an AI-powered context-switching companion that reimagines productivity through intentional transitions.

**For Product Managers / Next Phase:**

When moving from this brief to detailed product requirements (PRD):

1. **Review this brief thoroughly** to understand the strategic vision, target users, and key differentiators
2. **Start in PRD Generation Mode** - work section by section to translate this high-level brief into detailed specifications
3. **Focus areas for PRD development:**
   - Detailed user stories and acceptance criteria for each MVP feature
   - Comprehensive AI prompt library with examples
   - Complete API endpoint specifications with request/response schemas
   - Detailed UI component specifications with interaction patterns
   - Testing criteria and quality assurance procedures
   - Deployment and DevOps procedures

4. **Key questions to resolve during PRD creation:**
   - Exact AI prompt templates for all conversation scenarios
   - Specific rules for when AI should create flows vs. ask clarifying questions
   - Precise UX for transition moments (timing, dismissibility, frequency)
   - Detailed onboarding flow with screen-by-screen specifications
   - Error handling and edge case behaviors

5. **Maintain the vision:** The magic of My Flow is in the transitions, not the task management. Keep focus on helping users be intentional, not on building yet another feature-rich TODO app.

**This brief is your north star. Let's build something people actually want to use.** ðŸš€